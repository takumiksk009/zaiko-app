
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>åœ¨åº«ç®¡ç†ã‚µãƒ³ãƒ—ãƒ«</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 20px; color: #2c3e50; }
    h1 { text-align: center; }
    .section { margin-bottom: 40px; }
    input, button, select {
      padding: 8px; margin: 4px 0; font-size: 14px; width: 100%;
    }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #3498db; color: white; }
    .actions button { margin: 0 4px; }
    .tab { margin-bottom: 10px; }
    .tab button { padding: 10px; margin-right: 5px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>åœ¨åº«ç®¡ç†ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ³ãƒ—ãƒ«ï¼‰</h1>

  <div class="tab">
    <button onclick="switchTab('register')">ç™»éŒ²</button>
    <button onclick="switchTab('list')">ä¸€è¦§</button>
  </div>

  <div id="register" class="section">
    <h2>åœ¨åº«ç™»éŒ²</h2>
    <input type="text" id="user" placeholder="ç™»éŒ²è€…">
    <input type="text" id="maker" placeholder="ãƒ¡ãƒ¼ã‚«ãƒ¼">
    <input type="text" id="category" placeholder="ã‚«ãƒ†ã‚´ãƒª">
    <input type="text" id="model" placeholder="å‹å¼">
    <input type="number" id="qty" placeholder="å€‹æ•°">
    <input type="text" id="site" placeholder="ç¾å ´å">
    <input type="date" id="date">
    <button onclick="addInventory()">ç™»éŒ²</button>
  </div>

  <div id="list" class="section hidden">
    <h2>åœ¨åº«ä¸€è¦§</h2>
    <table>
      <thead>
        <tr><th>ç™»éŒ²è€…</th><th>ãƒ¡ãƒ¼ã‚«ãƒ¼</th><th>ã‚«ãƒ†ã‚´ãƒª</th><th>å‹å¼</th><th>å€‹æ•°</th><th>ç¾å ´å</th><th>æ³¨æ–‡æ—¥</th><th>æ“ä½œ</th></tr>
      </thead>
      <tbody id="inventoryBody"></tbody>
    </table>
  </div>

  <script>
    const STORAGE_KEY = "zaiko_data";

    function switchTab(tabId) {
      document.getElementById('register').classList.add('hidden');
      document.getElementById('list').classList.add('hidden');
      document.getElementById(tabId).classList.remove('hidden');
      if (tabId === 'list') renderInventory();
    }

    function getData() {
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    }

    function saveData(data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function addInventory() {
      const data = getData();
      const newItem = {
        user: document.getElementById('user').value,
        maker: document.getElementById('maker').value,
        category: document.getElementById('category').value,
        model: document.getElementById('model').value,
        qty: parseInt(document.getElementById('qty').value) || 0,
        site: document.getElementById('site').value,
        date: document.getElementById('date').value,
        id: Date.now()
      };
      data.push(newItem);
      saveData(data);
      alert("ç™»éŒ²ã—ã¾ã—ãŸï¼");
      document.querySelectorAll('#register input').forEach(el => el.value = "");
    }

    function renderInventory() {
      const data = getData();
      const tbody = document.getElementById('inventoryBody');
      tbody.innerHTML = "";
      data.filter(item => item.qty > 0).forEach((item, index) => {
        // ğŸ”§ ä¿®æ­£å†…å®¹ï¼šqtyï¼ˆæ®‹æ•°ï¼‰ãŒ0ã®åœ¨åº«ã¯è¡¨ç¤ºã‹ã‚‰é™¤å¤–ï¼ˆè‡ªå‹•éè¡¨ç¤ºåŒ–ï¼‰
        // å‰å›ã®å¤±æ•—ï¼šå…¨ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã—ã¦ã„ãŸãŸã‚ã€æ®‹æ•°0ãŒæ®‹ã£ã¦ã„ãŸ
    
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${item.user}</td>
          <td>${item.maker}</td>
          <td>${item.category}</td>
          <td>${item.model}</td>
          <td>${item.qty}</td>
          <td>${item.site}</td>
          <td>${item.date}</td>
          <td class="actions">
            <button onclick="useItem(${item.id})">ä½¿ç”¨</button>
            <button onclick="deleteItem(${item.id})">å‰Šé™¤</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function useItem(id) {
      let data = getData();
      data = data.map(item => {
        if (item.id === id && item.qty > 0) {
          item.qty -= 1;
        }
        return item;
      });
      saveData(data);
      renderInventory();
    }

    function deleteItem(id) {
      let data = getData().filter(item => item.id !== id);
      saveData(data);
      renderInventory();
    }

    window.addEventListener("DOMContentLoaded", () => {
      renderInventory();
    });
  </script>
</body>
</html>
